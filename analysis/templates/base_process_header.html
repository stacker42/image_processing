{% extends 'base.html' %}
{% load static %}

{% block title %}Header Check{% endblock %}

{% block content %}

    <h1>Header Check</h1>
    <p>Please check the header for the file you are about to process looks correct.<br /> We've detected the following values for the associated fields based on your device.</p>

    <table class="table table-striped">
        <tr><th>Card</th><th>Value</th></tr>
        <tr><td>Observation date [{{ device.date_card }}]({{ device.date_format }})</td><td>{{ date }}</td></tr>
        <tr><td>Filter [{{ device.filter_card }}]</td><td>{{ filter }}</td></tr>
        <tr><td>Exposure time [{{ device.exptime_card }}]</td><td>{{ exptime }}</td></tr>

    </table>

    <a href="{% url 'process_header_modify' file_id %}?date={{ date }}&filter={{ filter }}&exptime={{ exptime }}" class="btn btn-primary">This is incorrect, modify values</a>
    <br /><br />
    <form method="POST" action="{% url 'process_header' file_id %}" enctype="multipart/form-data">
        {% csrf_token %}
        <input name="delete" type="hidden" value="true">
        <input type="submit" class="btn btn-danger" value="This header is NOT correct, delete this file">
    </form>
    <br />
    {% if valid %}
    <form method="POST" action="{% url 'process_header' file_id %}" enctype="multipart/form-data">
        {% csrf_token %}
        <input name="delete" type="hidden" value="false">
        <input type="submit" class="btn btn-success" value="This header is correct, proceed to add it to the database">
    </form>
    <br />
    {% endif %}

    <pre>
    {{ header }}
    </pre>

{% endblock %}